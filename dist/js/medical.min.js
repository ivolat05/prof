$(function(){let c={"correct-answer":{name:"Врач",foto:"./img/main/doctor.png",dialog:"Ваши симптомы скорее всего связаны с острой респираторной вирусной инфекцией: острый назофарингит.",data:"complaints"},generalRecommendations:{name:"Врач",foto:"./img/main/doctor.png",dialog:`
			В таких случаях обычно используют:<br>
- полупостельный режим;<br>
- контроль температуры 2 раз в день;<br>
- обильное теплое питье 2-3 литра в сутки;<br>
- при температуре выше 38,5 °С или выраженной головной боли, боли в мышцах: парацетамол или ибупрофен;<br>- при насморке: сосудосуживающие препараты, но не более 5-7 дней;<br>
- от боли в горле: антисептические спреи и пастилки.
			`,data:"complaints"},faceToFaceReception:{name:"Врач",foto:"./img/main/doctor.png",dialog:"При ухудшении общего самочувствия вы можете обратиться к доктору очно или вызвать врача на дом.",data:"complaints"}},i={temperature:{name:"Врач",foto:"./img/main/doctor.png",dialog:"Скажите, пожалуйста, поднималась ли у вас температура?",data:"complaints"},"temperature-answer":{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Меня знобит, температура 37,5. ",data:"complaints"},pain:{name:"Врач",foto:"./img/main/doctor.png",dialog:"А горло у вас болит? Есть ли боли при глотании?",data:"complaints"},"pain-answer":{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Да, горло болит, глотать немного больно. ",data:"complaints"},"сough":{name:"Врач",foto:"./img/main/doctor.png",dialog:"А есть ли у вас кашель, затруднения при дыхании, боли в груди?",data:"complaints"},"сough-answer":{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Кашля нет, дышу хорошо.",data:"complaints"},runny:{name:"Врач",foto:"./img/main/doctor.png",dialog:"У вас есть насморк, заложенность носа или подобные жалобы?",data:"complaints"},"runny-answer":{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Да, из носа течёт ручьём, иногда он заложен.",data:"complaints"},startDisease:{name:"Врач",foto:"./img/main/doctor.png",dialog:"Когда вы заболели? С чем-нибудь связываете появление ваших жалоб?",data:"complaints"},"startDisease-answer":{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Думаю, вчера. Я гуляла под дождём и промокла.",data:"complaints"},currentDisease:{name:"Врач",foto:"./img/main/doctor.png",dialog:"Подскажите, а вы уже обращались к какому-нибудь врачу? Что-то делали для улучшения самочувствия?",data:"complaints"},"currentDisease-answer":{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Нет, никуда не ходила — только сидела дома и пила чай с лимоном.",data:"complaints"},epidemiologicalEnvironment:{name:"Врач",foto:"./img/main/doctor.png",dialog:"А кто-то ещё у вас дома болеет? Может, вы ходили куда-то, где вас могли заразить?",data:"complaints"},"epidemiologicalEnvironment-answer":{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Нет, я работаю из дома и никуда не ездила. Из близких тоже никто не болеет.",data:"complaints"},otherDisease:{name:"Врач",foto:"./img/main/doctor.png",dialog:"Скажите, пожалуйста, есть ли у вас хронические заболевания, аллергии, принимаете ли вы какие-то лекарства?",data:"complaints"},"otherDisease-answer":{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Нет, хронических заболеваний нет, аллергии нет.",data:"complaints"},fotoBtn:{name:"Врач",foto:"./img/main/doctor.png",dialog:"Анна, так как у нас удалённый приём, мне нужна будет ваша помощь в осмотре. Могу ли я вас попросить сфотографировать горло? Для этого широко откройте рот, расслабьте язык, поднести камеру к нёбу и сделайте фото со вспышкой.",data:"complaints"},"fotoBtn-answer":{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:'<img class="main-chat-img" src="./img/main/foto.jpg" alt="">',data:"complaints"}},e=[{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Здравствуйте, доктор. Кажется, я заболела",data:"complaints"},{name:"Врач",foto:"./img/main/doctor.png",dialog:`Здравствуйте! Я врач-терапевт, добро пожаловать на онлайн-консультацию. Скажите,
			пожалуйста, что вас беспокоит?`,data:"complaints"},{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:`Я нехорошо себя чувствую, похоже на простуду.<br>
		Скажите, пожалуйста, что делать?`,data:"complaints"}],n=[{name:"Врач",foto:"./img/main/doctor.png",dialog:"Анна, я могу вам предложить повторную консультацию через 3 дня, чтобы мы проконтролировали ваше самочувствие.",data:"complaints"},{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Да, давайте!",data:"complaints"},{name:"Врач",foto:"./img/main/doctor.png",dialog:"Хорошо, буду ждать вас. Выздоравливайте!",data:"complaints"},{name:"Пациент Штро Анна",foto:"./img/main/patient.png",dialog:"Спасибо, до свидания!",data:"complaints"}],o={"standart-error":{title:"Это действие сейчас недоступно",text:" Если не знаете, какой шаг предпринять дальше, смело заглядывайте в справочник"},"recom-error":{title:"Давать рекомендации ещё рано",text:"Загляните в справочник, если не знаете, как действовать дальше"},"cart-error":{title:"Заполнять медкарту ещё рано — вы не расспросили пациента",text:"Загляните в справочник, если не знаете, как действовать дальше"},"diagnoz-error":{title:"Устанавливать вероятный диагноз ещё рано",text:"Загляните в справочник, если не знаете, как действовать дальше"}},r={"incorrect-answer":{title:"Судя по симптомам, это не ангина",text:"Чтобы понять, чем болен пациент, изучите симптомы в справочнике"}},m={"complaints-info":"Боли в горле, заложенность носа, насморк, общая слабость, озноб, повышеннная температура","anamnesis-info":"Температура 37,5 °С, кашля и одышки нет. Cчитает себя больной со вчерашнего дня, причина: переохлаждение под дождём. За медицинской помощью не обращалась. Эпидемиологический анамнез: не отягощён."};function s(t,a,e,n,o){const i=document.querySelector(".main-chat");let c=document.createElement("div");c.classList.add("main-chat-row"),c.innerHTML=`
		<div class="avatar-box">
			<img src="${t}" alt="" class="avatar">
		</div>
		<div class="main-chat-coll" data-status="${n}">
			<div class="main-chat-head">
				<div class="main-chat-name">
					${a}
				</div>
				<div class="main-chat-time">
					${o}
				</div>
			</div>
			<div class="main-chat-text">
			${e}
			</div>
		</div>
 `,i.appendChild(c)}{let a=1e3;for(let t=0;t<e.length;t++)setTimeout(()=>{setTimeout(s(e[""+t].foto,e[""+t].name,e[""+t].dialog,e[""+t].data,f(Math.round(Date.now()/1e3))),""+a),v()},""+a),a+=2e3;setTimeout(()=>{const t=document.querySelector(".main-chat");let a=document.createElement("div");a.classList.add("main-chat-error"),a.innerHTML=`
			<div class="main-error-row">
				<div class="main-error-coll">
					<h3 class="main-error-title">
					Консультация началась!
					</h3>
					<p class="main-error-text">
					Выбирайте в меню справа наиболее подходящие действия. А если сомневаетесь, вам поможет справочник: там описаны все нюансы успешного приёма пациента.
					</p>

				</div>
				<div class="avatar-box">
					<img src="./img/main/error.png" alt="" class="avatar">
				</div>
			</div>`,t.appendChild(a),v();{let t=20,a=60,e=document.querySelector(".--minut"),n=document.querySelector(".--second");const o=setInterval(function(){0==--a&&(--t,a=60),t<0&&clearInterval(o),60===a?n.textContent="00":10<=a?n.textContent=""+a:a<=10&&(n.textContent="0"+a),60===t||-1===t?e.textContent="00":10<=t?e.textContent=""+t:t<=10&&(e.textContent="0"+t)},1e3)}l(".complaints"),d(".complaints"),u(".complaints"),l(".diagnoz"),l(".cart"),l(".recom")},8e3)}function l(t){let a=document.querySelector(""+t);a.classList.remove("--back-color")}function d(t){let a=document.querySelector(""+t);a.classList.remove("no-active")}function u(t){let a=document.querySelector(""+t);a.classList.remove("btn-error")}function g(t){const a=document.querySelector(".main-chat");let e=document.createElement("div");e.classList.add("main-print"),e.innerHTML=`<div class="avatar-box">
					<img src="./img/main/doctor.png" alt="" class="avatar">
				</div>
				<div class="main-chat-coll">
					<div class="main-chat-head">
						<div class="main-chat-name">
							Врач
						</div>
						<div class="main-chat-time">
							${t}
						</div>
					</div>
					<div class="main-chat-text main-dots-box">
						Печатает <span class="main-dots">...</span>
					</div>
				</div>`,a.appendChild(e),setTimeout(()=>{let t=document.querySelector(".main-print");t.remove()},2e3)}{let t=document.querySelectorAll(".btn-error");t.forEach(n=>{n.addEventListener("click",()=>{if(n.classList.contains("no-active")){var a=n.getAttribute("data-error");const e=document.querySelector(".main-chat");let t=document.createElement("div");t.classList.add("main-chat-error"),t.innerHTML=`
						 <div class="main-error-row">
							 <div class="main-error-coll">
								 <h3 class="main-error-title">
								 ${o[a].title}
								 </h3>
								 <p class="main-error-text">
								 ${o[a].text}
								 </p>

							 </div>
							 <div class="avatar-box">
								 <img src="./img/main/error.png" alt="" class="avatar">
							 </div>
						 </div>`,e.appendChild(t),v(),n.classList.add("--back-color"),n.classList.add("no-active"),n.classList.add("btn-error")}})})}function p(t,n,a,o){const e=document.querySelector(".cart");let i=document.querySelector("."+t),c=document.querySelectorAll(".medical-form-btn"),r=document.querySelectorAll(".medical-tab"),s=document.querySelector("."+a);e.addEventListener("click",()=>{if(i.classList.contains("activ-btn")){let t=document.querySelector("."+n);var e=t.getAttribute("data-tab");let a=document.getElementById(""+e);t.classList.remove("deactivate"),t.classList.remove("no-active"),t.classList.remove("btn-error"),c.forEach(t=>{t.classList.contains("active")&&t.classList.remove("active")}),r.forEach(t=>{t.classList.contains("active")&&t.classList.remove("active")}),t.classList.add("active"),a.classList.add("active"),s.innerHTML=m[o]}})}{const a=document.querySelector(".medical-sabe"),h=document.querySelector(".complaints"),L=document.querySelector(".anamnesis");let t=document.querySelector(".cart");a.addEventListener("click",()=>{h.classList.contains("activ-btn")&&!L.classList.contains("activ-btn")&&(t.textContent="Заполнить медкарту 1/2",t.classList.add("btn-error"),t.classList.add("no-active"),t.href="#",l(".anamnesis"),d(".anamnesis"),u(".anamnesis")),L.classList.contains("activ-btn")&&(t.textContent="Заполнить медкарту 2/2",t.classList.add("activ-btn"),l(".foto-btn"),d(".foto-btn"),u(".foto-btn"))})}{let t=document.querySelectorAll(".button-click");const b=document.querySelector(".complaints-accordion-info"),y=document.querySelector(".anamnesis-info"),S=document.querySelector(".foto-btn");let n=!0;const q=document.querySelector(".cart");let o=0;t.forEach(e=>{e.addEventListener("click",()=>{if(n&&!e.classList.contains("no-active")){n=!1,e.classList.add("--active");let t=e.getAttribute("data-info");var a=e.getAttribute("data-indicator");if("complaints"==a&&(o+=1,b.textContent=`Собрать жалобы ${o}/4`,4==o)){let t=document.querySelector("."+a);t.classList.add("activ-btn"),q.classList.add("open-modal"),l(".cart"),d(".cart"),u(".cart"),q.href="#medical-card",p("complaints","complaints-form-btn","complaints-form-info","complaints-info"),o=0}if("anamnesis"==a&&(o+=1,y.textContent=`Собрать анамнез ${o}/4`,4==o)){let t=document.querySelector("."+a);t.classList.add("activ-btn"),q.classList.add("open-modal"),l(".cart"),d(".cart"),u(".cart"),q.href="#medical-card",p("anamnesis","anamnesis-form-btn","anamnesis-form-info","anamnesis-info"),o=0}"fotoBtn"==a&&(S.textContent="Запросить фотографию горла 1/1",S.classList.add("activ-btn"),l(".diagnoz"),d(".diagnoz"),u(".diagnoz")),e.style.pointerEvents="none",g(f(Math.round(Date.now()/1e3))),v(),setTimeout(()=>{setTimeout(s(i[t].foto,i[t].name,i[t].dialog,i[t].data,f(Math.round(Date.now()/1e3))),1e3),v()},2e3),setTimeout(()=>{setTimeout(s(i[t+"-answer"].foto,i[t+"-answer"].name,i[t+"-answer"].dialog,i[t+"-answer"].data,f(Math.round(Date.now()/1e3))),1e3),v(),n=!0},4e3)}})})}{let t=document.querySelectorAll(".btn-incorrect");t.forEach(n=>{n.addEventListener("click",()=>{n.classList.add("--incorrect");var t=n.getAttribute("data-incorrect");const a=document.querySelector(".main-chat");let e=document.createElement("div");e.classList.add("main-chat-error"),e.innerHTML=`
					 <div class="main-error-row">
						 <div class="main-error-coll">
							 <h3 class="main-error-title">
							${r[t].title}
							 </h3>
							 <p class="main-error-text">
							 ${r[t].text}
							 </p>

						 </div>
						 <div class="avatar-box">
							 <img src="./img/main/error.png" alt="" class="avatar">
						 </div>
					 </div>`,a.appendChild(e),v(),setTimeout(()=>{n.classList.remove("--incorrect")},2e3)})})}{let t=document.querySelectorAll(".doctor-task"),e=document.querySelector(".recom"),o=0,i=document.querySelector(".recom-box-info");t.forEach(n=>{n.addEventListener("click",()=>{let t=n.getAttribute("data-task");var a=n.getAttribute("data-indicator");if(n.style.pointerEvents="none",g(f(Math.round(Date.now()/1e3))),v(),setTimeout(()=>{s(c[t].foto,c[t].name,c[t].dialog,c[t].data,f(Math.round(Date.now()/1e3))),v()},2e3),"diagnoz"==a){let t=document.querySelector(".btn-incorrect"),a=document.querySelector(".diagonz-head-info"),e=document.querySelector(".diagnoz");t.style.pointerEvents="none",a.textContent="Установить вероятный диагноз 1/1",e.classList.add("activ-btn"),n.classList.add("--active"),l(".recom"),d(".recom"),u(".recom")}"recom"==a&&(n.classList.add("--active"),n.style.pointerEvents="none",o+=1,i.textContent=`Дать рекомендацию ${o}/2`,2==o&&(e.classList.add("activ-btn"),l(".repeat"),d(".repeat"),u(".repeat")))})})}{let t=document.querySelector(".repeat"),a=1e3;t.addEventListener("click",()=>{if(!t.classList.contains("no-active")){t.classList.add("activ-btn");for(let t=0;t<n.length;t++)"Врач"==n[""+t].name&&(setTimeout(()=>{g(f(Math.round(Date.now()/1e3))),v()},""+a),a+=2e3),setTimeout(()=>{setTimeout(s(n[""+t].foto,n[""+t].name,n[""+t].dialog,n[""+t].data,f(Math.round(Date.now()/1e3))),""+a),v()},""+a),a+=2e3;setTimeout(()=>{const t=document.querySelector(".main-chat");let a=document.createElement("div");a.classList.add("main-chat-footer"),a.innerHTML=`
				<div class="main-footer-coll">
				<h3 class="main-footer-title">
					Вы молодец!
				</h3>
				<p class="man-footer-text">
					Пациент получил правильные рекомендации
					и скоро пойдёт на поправку
				</p>
			</div>
			<div class="main-footer-coll-2">
				<img src="./img/main/main-1.png" alt="" class="main-footer-img">
				<a href="#etap" class="main-chat-end open-modal">
					К следующему пациенту
				</a>
			</div>`,t.appendChild(a),v(),$(".open-modal").magnificPopup({type:"inline",mainClass:"mfp-fade"})},""+a)}})}function v(){var t,a=!1;$(window).on("wheel",function(){a=!0,clearTimeout(t),t=window.setTimeout(function(){a=!1},1e4)}),window.setInterval(function(){a||$(".main-chat").scrollTop($(".main-chat")[0].scrollHeight)},500)}function f(t){return timeString=(new Date).toTimeString().replace(/:[0-9]{2,2} .*/,""),t?timeString:timeString.replace(/:/," ")}});